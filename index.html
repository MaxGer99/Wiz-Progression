<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wizard101 Progression Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: transparent;
            color: #ffffff;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .progress-section {
            margin-bottom: 20px;
        }

        .progress-label {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .progress-bar-container {
            width: 100%;
            height: 30px;
            background: rgba(50, 50, 50, 0.8);
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4a90e2, #63b3ed);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            font-weight: bold;
            font-size: 14px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
        }

        #worldProgress .progress-bar {
            background: linear-gradient(90deg, #9b59b6, #8e44ad);
        }

        #totalProgress .progress-bar {
            background: linear-gradient(90deg, #f39c12, #e67e22);
        }

        .current-quest {
            margin-bottom: 20px;
        }

        .current-quest-label {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            color: #63b3ed;
        }

        .current-quest-text {
            background: rgba(30, 30, 30, 0.8);
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 4px solid #63b3ed;
            font-size: 15px;
            line-height: 1.4;
            min-height: 50px;
        }

        .counter-section {
            margin-top: 20px;
        }

        .counter-label {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            color: #f39c12;
        }

        .counter-display {
            background: rgba(30, 30, 30, 0.8);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #f39c12;
            font-size: 28px;
            font-weight: bold;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        /* Control panel for easy updates */
        .control-panel {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
        }

        .control-panel h3 {
            margin-bottom: 15px;
            color: #63b3ed;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 13px;
            color: #bbb;
        }

        .control-group input,
        .control-group textarea {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(50, 50, 50, 0.8);
            color: #ffffff;
            font-family: inherit;
            font-size: 14px;
        }

        .control-group textarea {
            resize: vertical;
            min-height: 60px;
        }

        .control-group input[type="number"] {
            width: 100px;
        }

        button {
            background: linear-gradient(90deg, #4a90e2, #63b3ed);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: transform 0.2s;
        }

        button:hover {
            transform: scale(1.05);
        }

        button:active {
            transform: scale(0.95);
        }

        .toggle-controls {
            margin-bottom: 15px;
        }

        .control-group select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(50, 50, 50, 0.8);
            color: #ffffff;
            font-family: inherit;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- World Progress Bar -->
        <div class="progress-section" id="worldProgress">
            <div class="progress-label">
                <span id="worldLabel">World Progress</span>
                <span id="worldPercentage">0%</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="worldBar" style="width: 0%;">
                    <span id="worldBarText"></span>
                </div>
            </div>
        </div>

        <!-- Total Progress Bar -->
        <div class="progress-section" id="totalProgress">
            <div class="progress-label">
                <span id="totalLabel">Total Progression</span>
                <span id="totalPercentage">0%</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="totalBar" style="width: 0%;">
                    <span id="totalBarText"></span>
                </div>
            </div>
        </div>

        <!-- Current Quest -->
        <div class="current-quest">
            <div class="current-quest-label">Current Quest:</div>
            <div class="current-quest-text" id="currentQuest">
                Loading quest information...
            </div>
        </div>

        <!-- Counter -->
        <div class="counter-section">
            <div class="counter-label" id="counterLabel">Counter:</div>
            <div class="counter-display" id="counterValue">0</div>
        </div>

        <!-- Control Panel (hide this in OBS by adjusting the crop) -->
        <div class="control-panel">
            <button class="toggle-controls" onclick="toggleControls()">Toggle Controls</button>
            
            <div id="controls" style="display: none;">
                <h3>Update Overlay</h3>
                
                <div class="control-group">
                    <label for="worldSelect">Select World:</label>
                    <select id="worldSelect" onchange="onWorldChange()">
                        <option value="">-- Choose a World --</option>
                        <option value="Wizard City">Wizard City</option>
                        <option value="Krokotopia">Krokotopia</option>
                        <option value="Marleybone">Marleybone</option>
                        <option value="Mooshu">Mooshu</option>
                        <option value="Dragonspyre">Dragonspyre</option>
                        <option value="Celestia">Celestia</option>
                        <option value="Zafaria">Zafaria</option>
                        <option value="Avalon">Avalon</option>
                        <option value="Azteca">Azteca</option>
                        <option value="Khrysalis">Khrysalis</option>
                        <option value="Polaris">Polaris</option>
                        <option value="Mirage">Mirage</option>
                        <option value="Empyrea">Empyrea</option>
                        <option value="Karamelle">Karamelle</option>
                        <option value="Lemuria">Lemuria</option>
                        <option value="Novus">Novus</option>
                        <option value="Wallaru">Wallaru</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="worldCurrent">World Progress (current):</label>
                    <input type="number" id="worldCurrent" min="0" value="0">
                </div>

                <div class="control-group">
                    <label for="worldTotal">World Progress (total):</label>
                    <input type="number" id="worldTotal" min="1" value="100">
                </div>

                <div class="control-group">
                    <label for="totalCurrent">Total Progress (current):</label>
                    <input type="number" id="totalCurrent" min="0" value="0">
                </div>

                <div class="control-group">
                    <label for="totalTotal">Total Progress (total):</label>
                    <input type="number" id="totalTotal" min="1" value="100">
                </div>

                <div class="control-group">
                    <label for="questSelect">Current Quest:</label>
                    <select id="questSelect" onchange="onQuestChange()">
                        <option value="">-- Select Current Quest --</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="questText">Or Enter Custom Quest Name:</label>
                    <textarea id="questText" placeholder="Enter the current quest name...">Find Sergeant Muldoon in Unicorn Way</textarea>
                </div>

                <div class="control-group">
                    <label for="counterText">Counter Label:</label>
                    <input type="text" id="counterText" placeholder="e.g., Deaths, Battles" value="Re-Rolls">
                </div>

                <div class="control-group">
                    <label for="counterNum">Counter Value:</label>
                    <input type="number" id="counterNum" min="0" value="0">
                </div>

                <button onclick="updateOverlay()">Update Display</button>
            </div>
        </div>
    </div>

    <script>
        // Complete quest database for all worlds
        const questDatabase = {
            'Wizard City': [
                'Unicorn Way',
                'Ghost Hunters',
                'Skeleton Crew',
                'Monsters and Mazes',
                'Finding Out Why',
                'Who Could It Be Now?',
                'Sinister Skeleton',
                'Grim Tales',
                'To Ravenwood!',
                'Panic In Three Streets!',
                'Secret Strife of Pets',
                'A Good Day to Cyclops',
                'A Stroll With Trolls',
                'Run and Done',
                'The Cave Escape',
                'Oh Me, Oh Minotaur',
                'Akilles\' Deal',
                'Putting Out the Fire!',
                'She Ran Crying Wildfire',
                'Which Hunt?',
                '100% Not That Witch',
                'Which Craft?',
                'The Cure',
                'Firecat\'s In the Bag',
                'Trouble on Triton Avenue',
                'Menacing Minions',
                'The Shadow of Death Magic',
                'Quest for Clues',
                'Catching a Glimpse',
                'Clear as Crystal',
                'Luminate',
                'The Enemy Revealed',
                'To Tame a Tempest',
                'Triton Report',
                'Calming the Chaos',
                'A Brief History of the Spiral',
                'Throwing Nightshade',
                'Things and Stuff',
                'Take a Walk on the Nightside'
            ],
            'Krokotopia': [
                'Welcome to Krok',
                'Finding Sophia',
                'The Spiral\'s Hidden Library',
                'A Friend in Need',
                'The Royal Court',
                'Meet the Emir',
                'The Oasis Library',
                'Halls of Power',
                'A Conversation with Nefaria',
                'Vault of Secrets',
                'Sands of Time'
            ],
            'Marleybone': [
                'Welcome to Marleybone',
                'A Letter from the Yard',
                'Follow the Clues',
                'A Pupil of the Arts',
                'Under the Streets',
                'Unfinished Business',
                'The Grand Tour',
                'Keeper of the Flame',
                'Broomstick Trouble',
                'A Game of Chance'
            ],
            'Mooshu': [
                'Welcome to Mooshu',
                'Dance with the Dragons',
                'A New Path',
                'Through Thick and Thin',
                'The Way Forward',
                'A Gentle Push',
                'Dragons Rising',
                'Beyond the Pagoda',
                'Whispers in the Reeds'
            ],
            'Dragonspyre': [
                'Welcome to Dragonspyre',
                'The Drake\s Neck',
                'The Heart of Dragonspyre',
                'Across the Rubicon',
                'The Depths',
                'Ambrose\'s Request'
            ],
            'Celestia': [
                'Welcome to Celestia',
                'The Tide Turns',
                'A Sunken Destiny',
                'Into the Sky',
                'The Key to Success',
                'What Lies Beyond'
            ],
            'Zafaria': [
                'Welcome to Zafaria',
                'The Way of the Spiral',
                'Jungle Conquest',
                'Power Rising',
                'The Final Confrontation'
            ],
            'Avalon': [
                'Welcome to Avalon',
                'A New Ally',
                'Into the Depths',
                'The Castle Waits',
                'The Siege'
            ],
            'Azteca': [
                'Welcome to Azteca',
                'A New Horizon',
                'The Ancient Ones',
                'Power\'s True Price',
                'Bonds of the Spiral'
            ],
            'Khrysalis': [
                'Welcome to Khrysalis',
                'A Troubling Vision',
                'Climb the Spiral',
                'The World Tree',
                'The Final Stand'
            ],
            'Polaris': [
                'Welcome to Polaris',
                'Frostheim',
                'The Broken Sky',
                'King\'s Court',
                'The End Game'
            ],
            'Mirage': [
                'Welcome to Mirage',
                'The Sands Shift',
                'Secrets of the Sphinx',
                'Clash of the Titans',
                'The Mirror Breaks'
            ],
            'Empyrea': [
                'Welcome to Empyrea',
                'The Final Battle Begins',
                'Skyway to Heaven',
                'What the Stars Foretell',
                'The Eternal Flame'
            ],
            'Karamelle': [
                'Welcome to Karamelle',
                'Sugar Rush',
                'The Sweet Life',
                'Recipe for Disaster',
                'Treat Yourself'
            ],
            'Lemuria': [
                'Welcome to Lemuria',
                'Lost in Translation',
                'Ancient Secrets',
                'The Power Within',
                'New Beginnings'
            ],
            'Novus': [
                'Welcome to Novus',
                'Brave New World',
                'Climb Infinitely',
                'The Core Truth',
                'Forever Forward'
            ],
            'Wallaru': [
                'Welcome to Wallaru',
                'Down Under',
                'Walkabout',
                'Outback Adventure',
                'The Dreamland'
            ]
        };

        const worlds = {
            'Wizard City': 39,
            'Krokotopia': 11,
            'Marleybone': 10,
            'Mooshu': 9,
            'Dragonspyre': 6,
            'Celestia': 6,
            'Zafaria': 5,
            'Avalon': 5,
            'Azteca': 5,
            'Khrysalis': 5,
            'Polaris': 5,
            'Mirage': 5,
            'Empyrea': 5,
            'Karamelle': 5,
            'Lemuria': 5,
            'Novus': 5,
            'Wallaru': 5
        };

        function onWorldChange() {
            const world = document.getElementById('worldSelect').value;
            if (world && worlds[world]) {
                document.getElementById('worldTotal').value = worlds[world];
                // Populate quest dropdown
                populateQuestDropdown(world);
            }
        }

        function populateQuestDropdown(world) {
            const questSelect = document.getElementById('questSelect');
            questSelect.innerHTML = '<option value="">-- Select Current Quest --</option>';
            
            if (questDatabase[world]) {
                questDatabase[world].forEach((quest, index) => {
                    const option = document.createElement('option');
                    option.value = quest;
                    option.textContent = `${index + 1}. ${quest}`;
                    questSelect.appendChild(option);
                });
            }
        }

        function onQuestChange() {
            const world = document.getElementById('worldSelect').value;
            const questSelect = document.getElementById('questSelect');
            const selectedQuest = questSelect.value;
            
            if (world && selectedQuest && questDatabase[world]) {
                const questIndex = questDatabase[world].indexOf(selectedQuest);
                if (questIndex !== -1) {
                    // Set world progress to current quest position
                    document.getElementById('worldCurrent').value = questIndex;
                    document.getElementById('questText').value = selectedQuest;
                    updateOverlay();
                }
            }
        }

        // Load saved values from localStorage
        function loadSavedValues() {
            const saved = {
                worldName: localStorage.getItem('worldName') || 'Wizard City',
                worldCurrent: localStorage.getItem('worldCurrent') || '0',
                worldTotal: localStorage.getItem('worldTotal') || '45',
                totalCurrent: localStorage.getItem('totalCurrent') || '0',
                totalTotal: localStorage.getItem('totalTotal') || '100',
                questText: localStorage.getItem('questText') || 'Find Sergeant Muldoon in Unicorn Way',
                counterText: localStorage.getItem('counterText') || 'Re-Rolls',
                counterNum: localStorage.getItem('counterNum') || '0'
            };

            // Set input values
            document.getElementById('worldSelect').value = saved.worldName;
            document.getElementById('worldCurrent').value = saved.worldCurrent;
            document.getElementById('worldTotal').value = saved.worldTotal;
            document.getElementById('totalCurrent').value = saved.totalCurrent;
            document.getElementById('totalTotal').value = saved.totalTotal;
            document.getElementById('questText').value = saved.questText;
            document.getElementById('counterText').value = saved.counterText;
            document.getElementById('counterNum').value = saved.counterNum;

            // Update display
            updateDisplay(saved);
        }

        function updateDisplay(data) {
            // Update world progress
            const worldPercent = Math.min(100, Math.round((data.worldCurrent / data.worldTotal) * 100));
            const questsLeft = Math.max(0, data.worldTotal - data.worldCurrent);
            document.getElementById('worldLabel').textContent = data.worldName + ' Progress';
            document.getElementById('worldPercentage').textContent = worldPercent + '% (' + questsLeft + ' left)';
            document.getElementById('worldBar').style.width = worldPercent + '%';
            document.getElementById('worldBarText').textContent = data.worldCurrent + '/' + data.worldTotal;

            // Update total progress
            const totalPercent = Math.min(100, Math.round((data.totalCurrent / data.totalTotal) * 100));
            document.getElementById('totalPercentage').textContent = totalPercent + '%';
            document.getElementById('totalBar').style.width = totalPercent + '%';
            document.getElementById('totalBarText').textContent = data.totalCurrent + '/' + data.totalTotal;

            // Update current quest
            document.getElementById('currentQuest').textContent = data.questText;

            // Update counter
            document.getElementById('counterLabel').textContent = data.counterText + ':';
            document.getElementById('counterValue').textContent = data.counterNum;
        }

        function updateOverlay() {
            const data = {
                worldName: document.getElementById('worldSelect').value,
                worldCurrent: parseInt(document.getElementById('worldCurrent').value),
                worldTotal: parseInt(document.getElementById('worldTotal').value),
                totalCurrent: parseInt(document.getElementById('totalCurrent').value),
                totalTotal: parseInt(document.getElementById('totalTotal').value),
                questText: document.getElementById('questText').value,
                counterText: document.getElementById('counterText').value,
                counterNum: parseInt(document.getElementById('counterNum').value)
            };

            // Save to localStorage
            Object.keys(data).forEach(key => {
                localStorage.setItem(key, data[key]);
            });

            // Update display
            updateDisplay(data);
        }

        function toggleControls() {
            const controls = document.getElementById('controls');
            controls.style.display = controls.style.display === 'none' ? 'block' : 'none';
        }

        // Keyboard shortcuts for quick counter updates
        document.addEventListener('keydown', function(e) {
            // Press + or = to increment counter
            if (e.key === '+' || e.key === '=') {
                const counterInput = document.getElementById('counterNum');
                counterInput.value = parseInt(counterInput.value) + 1;
                updateOverlay();
                e.preventDefault();
            }
            // Press - to decrement counter
            if (e.key === '-') {
                const counterInput = document.getElementById('counterNum');
                counterInput.value = Math.max(0, parseInt(counterInput.value) - 1);
                updateOverlay();
                e.preventDefault();
            }
        });

        // Load saved values on page load
        window.addEventListener('load', loadSavedValues);
    </script>
</body>
</html>
